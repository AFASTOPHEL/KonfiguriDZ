Инструмент командной строки для учебного конфигурационного

языка. В качестве специализированного инструмента синтаксического разбора была выбрана библиотека Lark.



1. Общее описание

Программа читает исходный файл с конфигурацией, выполняет его синтаксический разбор, разрешает ссылки на константы, вычисляет арифметические выражения на этапе трансляции и формирует выходной файл в формате YAML.

Особенности синтаксиса:

Поддержка многострочных комментариев.

Объявление типизированных значений: числа, строки, массивы.

Объявление и использование констант.

Вычисление константных выражений в постфиксной записи.



2\. Описание всех функций и настроек

Поддерживаются следующие конструкции учебного конфигурационного языка:



Комментарии:

`text

%{

&nbsp; Это многострочный

&nbsp; комментарий

%}



Примитивы:

Имена: \[\_a-zA-Z]+ (латиница, нижнее подчеркивание).

Числа: Восьмеричная запись 0o\[0-7]+

Строки: В формате @"Значение".



Массивы:

Объявляются через (list ...)

Пример: (list @"value1" 0o12 (list 1 2))



Константы:

Объявляются словом set

Пример: set port = 0o8080

set host = @"localhost"



Выражения:

Вычисления производятся на этапе трансляции. Используется постфиксная форма (обратная польская запись) внутри конструкции ^{ ... }.

Поддерживаемые операции: +, -, \*, / (целочисленное), mod (остаток от деления).

Пример: set base = 0o10

set result = ^{ base 0o2 + }  %{ (8 + 2) = 10 %}



3\. Описание команд для сборки проекта и запуска тестов

Инструмент запускается из командной строки с двумя аргументами: путь к входному файлу и путь к выходному файлу.

Пример: python main.py <input\_file> <output\_file>



Запуск тестов:

В репозитории лежат два тестовых конфига.

Пример запуска для config\_server.txt:python main.py config\_server.txt output\_server.yaml



4\. Примеры использования

Входной файл:

%{ Конфигурация сервера %}

set timeout = 0o12

set retry = 0o3

set max\_time = ^{ timeout retry \* 0o5 + }

set methods = (list @"GET" @"POST")



Выходной файл:

methods:

\- GET

\- POST

max\_time: 35    # (10 \* 3) + 5

retry: 3

timeout: 10     # 0o12



